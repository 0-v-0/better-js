# 枚举

## 枚举的基本概念
- **定义**：枚举是一种用户定义的类型，用于表示一组命名的常量。
- **用途**：提高代码的可读性和可维护性，避免使用魔法数字。
- **类型安全**：枚举类型是强类型的，不能与其他类型混用。
- **限制**：枚举值必须是编译时常量，且不能动态扩展。

可分为具名枚举和匿名枚举，其中具名枚举可分为普通枚举和不透明枚举。

枚举不会产生代码，除非用`export`修饰

## 枚举的声明
**语法**：
```d
enum EnumName {
    A,
    B,
    C,
}
```

其中，`EnumName`表示枚举名称
枚举成员不能重复，最后一个成员末尾可以有尾随逗号

**示例**：

普通枚举
```d
enum Color {
    red,
    green,
    blue,
}
```

带基础类型的枚举
```d
enum Ternary : byte {
    unknown,
    no,
    yes,
}
```

匿名枚举
```d
enum : long { A = 3, B }
```

#### 枚举的值
枚举值默认从0开始，依次递增

显式赋值
```d
enum Color {
    red = 1,
    green = 2,
    blue = 4,
}
```

匿名枚举允许包含不同类型的成员
```d
enum {
    A = 1.2f,  // A is 1.2f of type float
    B,         // B is 2.2f of type float
    int C = 3, // C is 3 of type int
    D          // D is 4 of type int
}
```

若枚举基础类型不是数值类型，则必须显式指定值
```d
enum : string {
    A = "hello",
    B = "betty",
    C     // error, cannot add 1 to "betty"
}
```

## 不透明枚举
不透明枚举是一种特殊的枚举类型，其成员不可见，大小未知，可用于隐藏枚举的实现细节，提供更好的封装性。

```d
enum Opaque;
```

不透明枚举只能作为类型使用，不能访问枚举的值。

## 单成员匿名枚举
单成员匿名枚举是一种特殊的匿名枚举。当匿名枚举只有一个成员时可省略大括号，例如：

```d
enum i = 4;      // i is 4 of type int
enum long l = 3; // l is 3 of type long
```

#### 4. 枚举的类型

### 枚举的内置属性
- **`.min`和`.max`**：获取枚举的最小值和最大值，仅基础类型为可比较类型的枚举有该属性。
- **`.init`**：获取枚举的初始值。
- **`.sizeof`**：获取枚举的大小。

只有普通枚举才有以上内置属性

### 枚举的使用
**变量声明**
```d
Color c = Color.Red;
```

**编译时计算**：枚举值可以在编译时进行计算。
```d
enum value = 10 + 20;
```

## 枚举的最佳实践
- **命名规范**：使用有意义的名称，避免使用缩写。
- **避免魔法数字**：使用枚举代替魔法数字，提高代码可读性。
- **类型安全**：充分利用枚举的类型安全性，避免类型错误。
